<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lending API 테스트 페이지</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 0;
            color: #333;
        }
        h1 {
            color: #007bff;
        }
        h2 {
            color: #0056b3;
        }
        .section {
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 10px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input, button {
            padding: 8px;
            margin-top: 5px;
            width: 100%;
            max-width: 400px;
        }
        .response {
            background-color: #f8f9fa;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-top: 10px;
            white-space: pre-wrap;
        }
        .error {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Lending API 테스트 페이지</h1>

    <div class="section">
        <h2>대출 요청</h2>
        <div class="form-group">
            <label for="borrowId">상품 ID</label>
            <input type="number" id="productId" placeholder="상품 ID">
        </div>
        <div class="form-group">
            <label for="startDate">대출 시작 날짜 (YYYY-MM-DD)</label>
            <input type="date" id="startDate">
        </div>
        <div class="form-group">
            <label for="endDate">대출 종료 날짜 (YYYY-MM-DD)</label>
            <input type="date" id="endDate">
        </div>
        <div class="form-group">
            <label for="totalPrice">총 가격</label>
            <input type="number" id="totalPrice" step="0.01" placeholder="총 가격">
        </div>
        <div class="form-group">
            <button onclick="borrowProduct()">대출 요청하기</button>
        </div>
        <div id="borrowResponse" class="response"></div>
    </div>

    <div class="section">
        <h2>반납 요청</h2>
        <div class="form-group">
            <label for="rentalId">대출 ID</label>
            <input type="number" id="rentalId" placeholder="대출 ID">
        </div>
        <div class="form-group">
            <button onclick="requestReturn()">반납 요청하기</button>
        </div>
        <div id="returnResponse" class="response"></div>
    </div>

    <div class="section">
        <h2>반납 승인</h2>
        <div class="form-group">
            <label for="approveRentalId">대출 ID</label>
            <input type="number" id="approveRentalId" placeholder="대출 ID">
        </div>
        <div class="form-group">
            <button onclick="approveReturn()">반납 승인하기</button>
        </div>
        <div id="approveResponse" class="response"></div>
    </div>

    <script>
        const apiUrl = 'http://localhost:8080/village'; // API 엔드포인트를 여기에 입력하세요

        async function borrowProduct() {
            const productId = document.getElementById('productId').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const totalPrice = document.getElementById('totalPrice').value;

            const response = await fetch(`${apiUrl}/rent`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    productId,
                    startDate,
                    endDate,
                    totalPrice,
                    paid: false
                })
            });

            const data = await response.json();
            document.getElementById('borrowResponse').textContent = JSON.stringify(data, null, 2);
        }

        async function requestReturn() {
            const rentalId = document.getElementById('rentalId').value;

            const response = await fetch(`${apiUrl}/giveback/request`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    rentalId
                })
            });

            const data = await response.json();
            document.getElementById('returnResponse').textContent = JSON.stringify(data, null, 2);
        }

        async function approveReturn() {
            const rentalId = document.getElementById('approveRentalId').value;

            const response = await fetch(`${apiUrl}/giveback/approve`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(rentalId)
            });

            const data = await response.json();
            document.getElementById('approveResponse').textContent = JSON.stringify(data, null, 2);
        }
    </script>
</body>
</html>
